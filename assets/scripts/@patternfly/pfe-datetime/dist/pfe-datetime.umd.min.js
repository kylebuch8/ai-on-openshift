!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("../../pfelement/dist/pfelement.umd.min")):"function"==typeof define&&define.amd?define(["../../pfelement/dist/pfelement.umd.min"],t):(e=e||self).PfeDatetime=t(e.PFElement)}(this,function(e){"use strict";e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e;var t=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},n=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},n=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,e),n(a,[{key:"html",get:function(){return"\n<style>:host{display:inline} /*# sourceMappingURL=pfe-datetime.min.css.map */</style>\n<span></span>"}},{key:"styleUrl",get:function(){return"pfe-datetime.scss"}},{key:"templateUrl",get:function(){return"pfe-datetime.html"}},{key:"_dateTimeType",get:function(){return this.format||this.type||a.properties.format.default}}],[{key:"version",get:function(){return"1.12.3"}},{key:"tag",get:function(){return"pfe-datetime"}},{key:"properties",get:function(){return{format:{title:"Format",type:String,values:["local","relative"],default:"local"},oldType:{alias:"format",attr:"type"},datetime:{title:"Date and time",type:String,observer:"_datetimeChanged",prefix:!1},timestamp:{title:"Timestamp",type:String,observer:"_timestampChanged",prefix:!1}}}}]),n(a,[{key:"_datetimeChanged",value:function(e,t){Date.parse(t)&&(Date.parse(t)&&this._datetime===Date.parse(t)||this.setDate(Date.parse(t)))}},{key:"_timestampChanged",value:function(e,t){this._timestamp!==t?(this._timestamp=t,this.setDate(new Date(1e3*t))):this.log("early return")}},{key:"setDate",value:function(e){this._datetime=e,this.shadowRoot.querySelector("span").innerText=window.Intl?this._getTypeString():e.toLocaleString()}},{key:"_getOptions",value:function(){var e,t={weekday:{short:"short",long:"long"},day:{numeric:"numeric","2-digit":"2-digit"},month:{short:"short",long:"long"},year:{numeric:"numeric","2-digit":"2-digit"},hour:{numeric:"numeric","2-digit":"2-digit"},minute:{numeric:"numeric","2-digit":"2-digit"},second:{numeric:"numeric","2-digit":"2-digit"},timeZoneName:{short:"short",long:"long"}},n={};for(e in t){var i=e.replace(/[\w]([A-Z])/g,function(e){return e[0]+"-"+e[1]}).toLowerCase(),i=t[e][this.getAttribute(i)];i&&(n[e]=i)}return this.getAttribute("time-zone")&&(n.timeZone=this.getAttribute("time-zone")),n}},{key:"_getTypeString",value:function(){var e=this._getOptions(),t=this.getAttribute("locale")||navigator.language,n="";switch(this._dateTimeType){case"local":n=new Intl.DateTimeFormat(t,e).format(this._datetime);break;case"relative":n=this._getTimeRelative(this._datetime-Date.now());break;default:n=this._datetime}return n}},{key:"_getTimeRelative",value:function(e){var t=0<e?"until":"ago",n="just now",i=Math.round(Math.abs(e)/1e3),r=Math.round(i/60),a=Math.round(r/60),o=Math.round(a/24),u=Math.round(o/30),e=Math.round(u/12);return 18<=u?n=e+" years":12<=u?n="a year":45<=o?n=u+" months":30<=o?n="a month":36<=a?n=o+" days":24<=a?n="a day":90<=r?n=a+" hours":45<=r?n="an hour":90<=i?n=r+" minutes":45<=i?n="a minute":10<=i&&(n=i+" seconds"),"just now"!==n?n+" "+t:n}}]),a);function a(){return t(this,a),r(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,a))}return e.create(n),n});

