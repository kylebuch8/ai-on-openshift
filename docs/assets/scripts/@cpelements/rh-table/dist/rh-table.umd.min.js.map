{"version":3,"file":"rh-table.umd.min.js","sources":["../_temp/rh-table.umd.js"],"sourcesContent":["/*!\n * PatternFly Elements: RhTable 0.0.19\n * @license\n * Copyright 2020 Red Hat, Inc.\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * \n*/\n\nimport PFElement from \"../../../@patternfly/pfelement/dist/pfelement.umd\";\n\n// @todo See if there are more a11y features we should take from: https://dequeuniversity.com/library/aria/table-sortable\n// @todo See if <dialog> tag could be useful for the maximized table\n// @todo Bug where fullscreen button doesn't show up sometimes in smaller reflow (hard to replicate)\n// @todo Pagination?\n// @todo Search?\n// @todo move to pfe-tools/pfe 2.0\n// @todo after pfe 2.0 write tests\n//    - Test to make sure full screen button shows up when table scrolls\n//    - Tests for sorting results\n\n/**\n * Debounce helper function\n * @see https://davidwalsh.name/javascript-debounce-function\n *\n * @param {function} func Function to be debounced\n * @param {number} delay How long until it will be run\n * @param {boolean} immediate Whether it should be run at the start instead of the end of the debounce\n */\nfunction debounce(func, delay, immediate = false) {\n  var timeout;\n  return function () {\n    var context = this,\n      args = arguments;\n    var later = function () {\n      timeout = null;\n      if (!immediate) func.apply(context, args);\n    };\n    var callNow = immediate && !timeout;\n    clearTimeout(timeout);\n    timeout = setTimeout(later, delay);\n    if (callNow) func.apply(context, args);\n  };\n}\n\nclass RhTable extends PFElement {\n  static get version() {\n    return \"0.0.19\";\n  }\n\n  get html() {\n    return `<style>*{-webkit-box-sizing:border-box;box-sizing:border-box}:host{position:relative;display:block;width:auto;width:var(--rh-table--wrappers--width,auto)}:host([hidden]){display:none}:host(.rh-table--expanded-vertically){--rh-table--maxHeight:max-content}#wrapper{overflow:auto;width:auto;width:var(--rh-table--wrappers--width,auto);max-width:100%;max-height:-webkit-max-content;max-height:-moz-max-content;max-height:max-content;max-height:var(--rh-table--maxHeight,-webkit-max-content);max-height:var(--rh-table--maxHeight,-moz-max-content);max-height:var(--rh-table--maxHeight,max-content);scrollbar-color:#8e8e8e #d6d6d6}#wrapper::-webkit-scrollbar{width:.625rem;height:.625rem}#wrapper::-webkit-scrollbar,#wrapper::-webkit-scrollbar-track{background-color:#d6d6d6}#wrapper::-webkit-scrollbar-thumb{background-color:#8e8e8e}#wrapper.table-full-screen{position:fixed;top:40px;right:0;bottom:40px;left:0;z-index:1;overflow:scroll;margin:0;width:100%;max-height:90vh;padding:40px;background-color:#fff}@media (min-width:1400px){#wrapper.table-full-screen{padding:40px 160px}}#wrapper.table-full-screen .full-screen{right:40px}.overlay{position:fixed;top:0;left:0;z-index:-1;display:block;width:100%;height:100%;background:rgba(21,21,21,.5);background:var(--pfe-table--overlay--Background,rgba(21,21,21,.5))}.overlay[hidden]{display:none}.visually-hidden{position:absolute;overflow:hidden;clip:rect(0,0,0,0);width:1px;height:1px;padding:0;border:0;white-space:nowrap}button{border:0;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#f0efef;cursor:pointer}button:focus{outline:2px dashed #000;outline:var(--rh-table--button--outline--focus,2px dashed #000)}.rh-table__expand-vertical-button,.rh-table__full-screen-button{position:absolute;right:calc(0px + 8px);right:calc(var(--rh-table--scrollbar--width,0px) + 8px);z-index:1;width:1.75rem;height:1.75rem;padding:6px;color:#8a8a8a;background:#f0efef}:host(.full-screen) .rh-table__expand-vertical-button,:host(.full-screen) .rh-table__full-screen-button{display:none}.rh-table__expand-vertical-button svg,.rh-table__full-screen-button svg{width:1rem;height:1rem}.rh-table__expand-vertical-button:focus,.rh-table__expand-vertical-button:hover,.rh-table__full-screen-button:focus,.rh-table__full-screen-button:hover{color:#06c}.rh-table__expand-vertical-button{top:calc(1.75rem + 8px)}:host(.rh-table--expanded-vertically) .rh-table__expand-vertical-button{background:#2b9af3;color:#fff}.rh-table__expand-vertical-button path,.rh-table__expand-vertical-button svg{fill:currentColor}.rh-table__close-full-screen-button{position:fixed;top:80px;right:40px;z-index:10;display:none;width:2rem;height:2rem;padding:0;background:#f0efef}:host(.full-screen) .rh-table__close-full-screen-button{display:block}.rh-table__close-full-screen-button svg{width:2rem;height:2rem}\n/*# sourceMappingURL=rh-table.min.css.map */\n</style><div id=\"wrapper\">\n  <button class=\"rh-table__sort-button\" hidden title=\"Sort in descending order\">\n    <svg\n      aria-hidden=\"true\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      viewBox=\"0 0 320 512\"\n    >\n      <path\n        class=\"arrow--up\"\n        d=\"M27.66 224h264.7c24.6 0 36.89-29.78 19.54-47.12l-132.3-136.8c-5.406-5.406-12.47-8.107-19.53-8.107c-7.055 0-14.09 2.701-19.45 8.107L8.119 176.9C-9.229 194.2 3.055 224 27.66 224z\"\n      />\n      <path\n        class=\"arrow--down\"\n        d=\"M311.9 335.1l-132.4 136.8C174.1 477.3 167.1 480 160 480c-7.055 0-14.12-2.702-19.47-8.109l-132.4-136.8C-9.229 317.8 3.055 288 27.66 288h264.7C316.9 288 329.2 317.8 311.9 335.1z\"\n      />\n    </svg>\n  </button>\n  <button class=\"rh-table__full-screen-button full-screen\" hidden title=\"Maximize the table\">\n    <svg\n      aria-hidden=\"true\"\n      focusable=\"false\"\n      data-prefix=\"fas\"\n      data-icon=\"expand-arrows-alt\"\n      class=\"svg-inline--fa fa-expand-arrows-alt fa-w-14\"\n      role=\"img\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      viewBox=\"0 0 448 512\"\n    >\n      <path\n        fill=\"currentColor\"\n        d=\"M448 344v112a23.94 23.94 0 0 1-24 24H312c-21.39 0-32.09-25.9-17-41l36.2-36.2L224 295.6 116.77 402.9 153 439c15.09 15.1 4.39 41-17 41H24a23.94 23.94 0 0 1-24-24V344c0-21.4 25.89-32.1 41-17l36.19 36.2L184.46 256 77.18 148.7 41 185c-15.1 15.1-41 4.4-41-17V56a23.94 23.94 0 0 1 24-24h112c21.39 0 32.09 25.9 17 41l-36.2 36.2L224 216.4l107.23-107.3L295 73c-15.09-15.1-4.39-41 17-41h112a23.94 23.94 0 0 1 24 24v112c0 21.4-25.89 32.1-41 17l-36.19-36.2L263.54 256l107.28 107.3L407 327.1c15.1-15.2 41-4.5 41 16.9z\"\n      ></path>\n    </svg>\n  </button>\n  <button class=\"rh-table__expand-vertical-button\" hidden title=\"Expand to full height\">\n    <svg\n      aria-hidden=\"true\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      viewBox=\"0 0 320 512\">\n      <path d=\"M182.6 9.4c-12.5-12.5-32.8-12.5-45.3 0l-96 96c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L128 109.3V402.7L86.6 361.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l96 96c12.5 12.5 32.8 12.5 45.3 0l96-96c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 402.7V109.3l41.4 41.4c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3l-96-96z\"/>\n    </svg>\n  </button>\n  <slot></slot>\n</div>\n<button class=\"rh-table__close-full-screen-button full-screen--close\" title=\"Restore table to original size\">\n  <svg fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 28 28\">\n    <path fill=\"#F0EFEF\" d=\"M0 0h28v28H0z\" />\n    <g clip-path=\"url(#a)\">\n      <path\n        d=\"M12.25 15h-3.5a.75.75 0 0 0-.531 1.281l1.028.969-3.1 3.103a.502.502 0 0 0 0 .706l.794.794a.502.502 0 0 0 .706 0l3.103-3.103.972 1.031A.749.749 0 0 0 13 19.25v-3.5a.748.748 0 0 0-.75-.75Zm3.5-2h3.5a.751.751 0 0 0 .531-1.281l-1.031-.969 3.103-3.103a.502.502 0 0 0 0-.706l-.794-.794a.502.502 0 0 0-.706 0L17.25 9.25l-.972-1.031A.749.749 0 0 0 15 8.75v3.5c0 .416.334.75.75.75Zm3 4.25 1.031-.972A.749.749 0 0 0 19.25 15h-3.5a.748.748 0 0 0-.75.75v3.5a.751.751 0 0 0 1.281.531l.969-1.028 3.103 3.103a.502.502 0 0 0 .706 0l.794-.794a.502.502 0 0 0 0-.706L18.75 17.25Zm-7.031-9.028-.97 1.028-3.102-3.103a.502.502 0 0 0-.706 0l-.794.794a.502.502 0 0 0 0 .706L9.25 10.75l-1.031.972A.749.749 0 0 0 8.749 13h3.5c.416 0 .75-.334.75-.75v-3.5c0-.666-.809-1-1.28-.528Z\"\n        fill=\"#9B9B9B\"\n      />\n    </g>\n    <defs>\n      <clipPath id=\"a\">\n        <path fill=\"#fff\" transform=\"translate(6 6)\" d=\"M0 0h16v16H0z\" />\n      </clipPath>\n    </defs>\n  </svg>\n</button>\n<div class=\"overlay\" hidden></div>`;\n  }\n\n  static get properties() {\n    return {\"compact-mode\":{\"title\":\"Compact-mode\",\"type\":\"string\",\"enum\":[],\"default\":\"\",\"prefixed\":true},\"sortable-cols\":{\"title\":\"Sortable-cols\",\"type\":\"string\",\"enum\":[],\"default\":\"\",\"prefixed\":true}};\n  }\n\n  static get slots() {\n    return {\"default\":{\"title\":\"Default slot\",\"type\":\"array\",\"namedSlot\":false,\"items\":{\"oneOf\":[{\"$ref\":\"raw\"}]}}};\n  }\n  static get tag() {\n    return \"rh-table\";\n  }\n\n  static get properties() {\n    return {};\n  }\n\n  static get slots() {\n    return {};\n  }\n\n  get schemaUrl() {\n    return \"rh-table.json\";\n  }\n\n  get templateUrl() {\n    return \"rh-table.html\";\n  }\n\n  get styleUrl() {\n    return \"rh-table.scss\";\n  }\n\n  static get events() {\n    return {\n      sorted: `${this.tag}:sorted`,\n    };\n  }\n\n  // Declare the type of this component\n  static get PfeType() {\n    return PFElement.PfeTypes.Content;\n  }\n\n  static get observedAttributes() {\n    return [\"compact-mode\", \"sortable-cols\"];\n  }\n\n  constructor() {\n    super(RhTable, { type: RhTable.PfeType });\n    // NO DOM ACCESS\n\n    this.table = null;\n    this._shadowWrapper = this.shadowRoot.getElementById(\"wrapper\");\n    this.canFullScreen = true;\n    this.isFullscreen = false;\n    this._fullScreenButton =\n      this.shadowRoot.querySelector(\".rh-table__full-screen-button\");\n    this._expandButton = this.shadowRoot.querySelector('.rh-table__expand-vertical-button')\n    this._fullScreenCloseButton = this.shadowRoot.querySelector(\".rh-table__close-full-screen-button\");\n    this._overlay = this.shadowRoot.querySelector(\".overlay\");\n    this._expandUnpressed = true;\n    this.hovered = {\n      hoveredCoordinates: null,\n      styleElement: null,\n      styleSheet: null,\n      checkInterval: null,\n    };\n\n    this.docLang;\n    this._sortHeadings = null;\n    this.tableSortValues = { heading: [], values: [] };\n    this.tableCellValues = {};\n    this.sortable = null;\n    this.lastSortCol = null;\n    this.resizeDebounce = 250;\n    this.sortOrder = \"az\";\n\n    // Used to trap focus in maximized table\n    this._focusableElements =\n      'button, a[href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])';\n    // Used to track\n    this._previousFirstFocusableElement = null;\n    this._focusTrapCallbacks = {\n      first: null,\n      last: null,\n    };\n\n    this.translations = {\n      maximizeTable: {\n        en: \"Maximize the table\",\n        ko: \"테이블 크기 최대화\",\n        jp: \"表の最大化表示\",\n        zh: \"最大化表\",\n        zh_cn: \"最大化表\",\n        fr: \"Agrandir Table\",\n        it: \"Visualizza la tabella a schermo pieno\",\n        es: \"Maximizar la tabla\",\n        de: \"Tabelle vergrößern\",\n        pt: \"Maximizar a tabela\",\n      },\n      closeFullscreen: {\n        en: \"Restore table to original size\",\n        ko: \"전체 화면 표시 닫기\",\n        jp: \"表の全画面表示の終了\",\n        zh: \"关闭全屏显示表\",\n        zh_cn: \"关闭全屏显示表\",\n        fr: \"Fermer Table Plein écran\",\n        it: \"Esci dalla modalità a schermo pieno\",\n        es: \"Minimizar la tabla\",\n        de: \"Vollbildtabelle schließen\",\n        pt: \"Fechar a tabela em tela cheia\",\n      },\n      sortAscending: {\n        en: \"Sort by ascending order\",\n        ko: \"Sort by ascending order\",\n        jp: \"Sort by ascending order\",\n        zh: \"Sort by ascending order\",\n        zh_cn: \"Sort by ascending order\",\n        fr: \"Sort by ascending order\",\n        it: \"Sort by ascending order\",\n        es: \"Sort by ascending order\",\n        de: \"Sort by ascending order\",\n        pt: \"Sort by ascending order\",\n      },\n      sortDescending: {\n        en: \"Sort by descending order\",\n        ko: \"Sort by descending order\",\n        jp: \"Sort by descending order\",\n        zh: \"Sort by descending order\",\n        zh_cn: \"Sort by descending order\",\n        fr: \"Sort by descending order\",\n        it: \"Sort by descending order\",\n        es: \"Sort by descending order\",\n        de: \"Sort by descending order\",\n        pt: \"Sort by descending order\",\n      },\n    };\n\n    // Ensure 'this' is tied to the component object in these member functions\n    const functionsToBind = [\n      \"_processLightDom\",\n      \"_rowAndColumnHighlight\",\n      \"_popstateListener\",\n      \"_toggleFullScreen\",\n      \"_sortData\",\n      \"_getCSSStyleSheetById\",\n      \"_checkForScroll\",\n      \"_handleEscPress\",\n      \"_getTranslatedString\",\n      \"setupFocusTrap\",\n      \"removeFocusTrap\",\n      \"_trapFocusInMaximizedTable\",\n    ];\n\n    for (let index = 0; index < functionsToBind.length; index++) {\n      const functionName = functionsToBind[index];\n      if (this[functionName]) {\n        this[functionName] = this[functionName].bind(this);\n      } else {\n        this.error(\"Tried to bind a function that doesn't exist\", functionName);\n      }\n    }\n\n    this._resizeListener = debounce(this._checkForScroll, this.resizeDebounce);\n    this._overlay.addEventListener(\"click\", () =>\n      this._toggleFullScreen(false)\n    );\n    this._fullScreenCloseButton.addEventListener(\"click\", () =>\n      this._toggleFullScreen(false)\n    );\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    // BEGIN DOM ACCESS\n\n    this._sortButtonBoilerplate = this.shadowRoot.querySelector(\n      \".rh-table__sort-button\"\n    );\n\n    // Make sure pointers are set\n    this.table = this.table ? this.table : this.querySelector(\"table\");\n    this._sortHeadings = this.table.querySelectorAll(\".sort-button\");\n\n    // check to see if the table has a top heading\n    this.topHeading = this.getAttribute(\"top-heading\");\n\n    // check to see if the table is sortable\n    this.sortable = this.getAttribute(\"sortable\");\n\n    // check to see if the full screen button is disabled\n    this.canFullScreen = this.stringToBool(this.getAttribute(\"full-screen\"));\n\n    // Make an unique id for use on table id, style tag id, etc.\n    const newId = Math.random().toString(36).substring(2, 9);\n    this.dataset.id = newId;\n    // If we don't have an ID on the table, set one\n    if (!this.id) {\n      this.id = `rh-table--${newId}`;\n    }\n\n    if (this.canFullScreen) {\n      window.addEventListener(\"resize\", this._resizeListener);\n      this._fullScreenButton.addEventListener(\"click\", () =>\n        this._toggleFullScreen(true)\n      );\n      this._expandButton.addEventListener('click', () => {\n        this._expandUnpressed = false;\n        if (this.classList.contains('rh-table--expanded-vertically')) {\n          this.classList.remove('rh-table--expanded-vertically');\n        }\n        else {\n          this.classList.add('rh-table--expanded-vertically');\n        }\n        this._checkForScroll();\n      });\n    }\n\n    // Get the docLang if it wasn't set and the doc has one\n    if (\n      !this.docLang &&\n      document &&\n      document.documentElement &&\n      document.documentElement.lang\n    ) {\n      this.docLang = document.documentElement.lang.toLowerCase();\n    }\n\n    // Add correct translation for expand text\n    const maximizeTableString = this._getTranslatedString(\"maximizeTable\");\n    if (this._fullScreenButton && maximizeTableString) {\n      this._fullScreenButton.setAttribute(\"title\", maximizeTableString);\n    } else {\n      this.warn(\n        \"Was unable to translate assistive text on maximize table button\"\n      );\n    }\n\n    // Add correct translation for collapse text\n    const closeFullscreenString = this._getTranslatedString(\"closeFullscreen\");\n    if (closeFullscreenString && this._fullScreenCloseButton) {\n      this._fullScreenCloseButton.setAttribute(\"title\", closeFullscreenString);\n    } else {\n      this.warn(\n        \"Was unable to translate assistive text on collapse table button\"\n      );\n    }\n\n    // fullScreenButton.value = `rh-table--${newId}`;\n\n    this._processLightDom();\n\n    // this.addEventListener(RhTable.events.sorted, this._sortedHandler);\n  }\n\n  disconnectedCallback() {\n    // this.removeEventListener(RhTable.events.sorted, this._sortedHandler);\n    this.table.removeEventListener(\"mouseover\", this._rowAndColumnHighlight);\n    window.removeEventListener(\"resize\", this._resizeListener);\n    this._overlay.removeEventListener(\"click\", () =>\n      this._toggleFullScreen(false)\n    );\n    this._fullScreenCloseButton.removeEventListener(\"click\", () =>\n      this._toggleFullScreen(false)\n    );\n  }\n\n  stringToBool(string) {\n    if (string === \"false\" || string === \"f\") {\n      return false;\n    } else {\n      return true;\n    }\n  }\n\n  /**\n   * Get trnaslated string\n   * @param {string} stringName The index value for the string in this.translations\n   * @returns Translated string\n   */\n  _getTranslatedString(stringName) {\n    if (\n      this.translations[stringName] &&\n      this.translations[stringName][this.docLang]\n    ) {\n      return this.translations[stringName][this.docLang];\n    } else if (\n      this.translations[stringName] &&\n      this.translations[stringName][\"en\"]\n    ) {\n      this.warn(`Could not get translated string for ${stringName}`);\n      return this.translations[stringName][\"en\"];\n    }\n    this.warn(\n      `Could not get translated string for ${stringName}, or english version, docLang is set to ${this.docLang}`\n    );\n  }\n\n  // Process the attribute change\n  // attributeChangedCallback(attr, oldValue, newValue) {\n  //   super.attributeChangedCallback(attr, oldValue, newValue);\n  // }\n\n  _trapFocusInMaximizedTable() {\n    if (this.isFullscreen) {\n    }\n  }\n\n  /**\n   * Keeps a keyboard user from getting outside of the maximzed table overlay\n   */\n  setupFocusTrap() {\n    const queryFirstFocusableElement = this.querySelector(\n      this._focusableElements\n    );\n    const lastFocusableElement = this._fullScreenCloseButton;\n    const firstFocusableElement = queryFirstFocusableElement\n      ? queryFirstFocusableElement\n      : this._fullScreenCloseButton;\n\n    // Set var so we can remove the listener later\n    this._previousFirstFocusableElement = firstFocusableElement;\n    // There is only one focusable element in the maximized table\n    if (firstFocusableElement === lastFocusableElement) {\n      this._focusTrapCallbacks.first = (event) => {\n        if (this.isFullscreen && event.key === \"Tab\") {\n          event.preventDefault();\n          firstFocusableElement.focus();\n        }\n      };\n      firstFocusableElement.addEventListener(\n        \"keydown\",\n        this._focusTrapCallbacks.first\n      );\n\n      this._focusTrapCallbacks.last = null;\n    } else {\n      // Setup first focusable element\n      this._focusTrapCallbacks.first = (event) => {\n        if (this.isFullscreen && event.key === \"Tab\" && event.shiftKey) {\n          event.preventDefault();\n          lastFocusableElement.focus();\n        }\n      };\n      firstFocusableElement.addEventListener(\n        \"keydown\",\n        this._focusTrapCallbacks.first\n      );\n\n      // Setup last focusable element\n      this._focusTrapCallbacks.last = (event) => {\n        if (this.isFullscreen && event.key === \"Tab\" && !event.shiftKey) {\n          event.preventDefault();\n          firstFocusableElement.focus();\n        }\n      };\n      lastFocusableElement.addEventListener(\n        \"keydown\",\n        this._focusTrapCallbacks.last\n      );\n    }\n  }\n\n  /**\n   * Remove event listeners for focus trap\n   */\n  removeFocusTrap() {\n    if (this._previousFirstFocusableElement && this._focusTrapCallbacks.first) {\n      this._previousFirstFocusableElement.removeEventListener(\n        \"keydown\",\n        this._focusTrapCallbacks.first\n      );\n    }\n    if (this._fullScreenCloseButton && this._focusTrapCallbacks.last) {\n      this._fullScreenCloseButton.removeEventListener(\n        \"keydown\",\n        this._focusTrapCallbacks.last\n      );\n    }\n  }\n\n  /**\n   * Catch when the URL has changed and close the full screen table if content isn't contained\n   */\n  _popstateListener() {\n    // Figure out if the URL update has a hash\n    if (location.hash) {\n      // If it does and the referenced element isn't in this table, close full screen\n      if (!this.querySelector(location.hash)) {\n        this._toggleFullScreen(false);\n      }\n    }\n  }\n\n  /**\n   * Open or close the full screen mode of the table\n   * @param {boolean} setToFullscreen Desired state\n   */\n  _toggleFullScreen(setToFullscreen) {\n    // Maximize table\n    if (setToFullscreen) {\n      // Make sure page layout doesn't change when table gets removed from document flow\n      this.style.height = `${this.offsetHeight}px`;\n      // @todo Retire non-BEM class\n      this.classList.add(\"full-screen\", \"rh-table--full-screen\");\n      document.body.classList.add(\"rh-table--is-full-screen\");\n      this._shadowWrapper.classList.add(\"table-full-screen\");\n      this._overlay.hidden = false;\n      window.addEventListener(\"keydown\", this._handleEscPress, true);\n      this.table.focus();\n      this.isFullscreen = true;\n      this.setupFocusTrap();\n      // Listener that closes full screen if a link outside of the table is clicked\n      window.addEventListener('popstate', this._popstateListener);\n    }\n    // Restore table to original size\n    else {\n      this.removeAttribute(\"style\");\n      // @todo Retire non-BEM class\n      this.classList.remove(\"full-screen\", \"rh-table--full-screen\");\n      document.body.classList.remove(\"rh-table--is-full-screen\");\n      this._shadowWrapper.classList.remove(\"table-full-screen\");\n      this._overlay.hidden = true;\n      window.removeEventListener(\"keydown\", this._handleEscPress, true);\n      this.removeFocusTrap();\n      window.removeEventListener('popstate', this._popstateListener);\n      this.isFullscreen = false;\n    }\n  }\n\n  /**\n   * Handle keyboard inputs\n   * @param {object} event Event object from event listener\n   */\n  _handleEscPress(event) {\n    if (event.defaultPrevented) {\n      return; // Do nothing if the event was already processed\n    }\n    switch (event.key) {\n      case \"Esc\": // IE/Edge specific value\n      case \"Escape\":\n        // check to see if table is full screen\n        if (this.isFullscreen) {\n          // if it is, close it\n          this._toggleFullScreen(false);\n        }\n        break;\n      default:\n        return; // Quit when this doesn't handle the key event.\n    }\n    // Cancel the default action to avoid it being handled twice\n    event.preventDefault();\n  }\n\n  /**\n   * Sort the data based on column heading\n   * @param {object} event Event object from event listener\n   */\n  _sortData(event) {\n    const thisCell = event.target.closest(\"td, th\");\n    let row, col;\n    if (thisCell) {\n      row = thisCell.dataset.row - 1;\n      col = thisCell.dataset.col - 1;\n    } else {\n      console.warn(\"Wasn't able to get column information to sort\");\n      return;\n    }\n\n    // check to see if this is re-sorting a row/col that has been sorted\n    // already to swap the direction of the values if it has\n    if (this.lastSortCol === col && this.sortOrder === \"az\") {\n      this.sortOrder = \"za\";\n    } else {\n      this.sortOrder = \"az\";\n    }\n    thisCell.classList.add(`sort-${this.sortOrder}`);\n    this.lastSortCol = col;\n\n    function checkIfLetters(value) {\n      const regex = RegExp(\"^d\");\n      return regex.test(value);\n    }\n    let sortedData;\n\n    if (this.sortOrder === \"az\") {\n      sortedData = this.tableSortValues.sort((a, b) => {\n        let aParam = a[col].innerText;\n        let bParam = b[col].innerText;\n        const aIsLetters = checkIfLetters(aParam);\n        const bIsLetters = checkIfLetters(bParam);\n        if (typeof aParam === \"string\" && aIsLetters && bIsLetters) {\n          aParam = aParam.toUpperCase(); // ignore upper and lowercase\n          bParam = bParam.toUpperCase(); // ignore upper and lowercase\n        }\n\n        if (aParam < bParam) {\n          return -1;\n        }\n        if (aParam > bParam) {\n          return 1;\n        }\n        // names must be equal\n        return 0;\n      });\n    } else if (this.sortOrder === \"za\") {\n      sortedData = this.tableSortValues.sort(function (a, b) {\n        let aParam = a[col].innerText;\n        let bParam = b[col].innerText;\n\n        const aIsLetters = checkIfLetters(aParam);\n        const bIsLetters = checkIfLetters(bParam);\n        if (typeof aParam === \"string\" && aIsLetters && bIsLetters) {\n          aParam = aParam.toUpperCase(); // ignore upper and lowercase\n          bParam = bParam.toUpperCase(); // ignore upper and lowercase\n        }\n\n        if (aParam < bParam) {\n          return 1;\n        }\n        if (aParam > bParam) {\n          return -1;\n        }\n        // names must be equal\n        return 0;\n      });\n    }\n\n    // wrapper for the rows\n    const wrapper = document.createElement(\"tbody\");\n\n    for (let rowIndex = 0; rowIndex < sortedData.length; rowIndex++) {\n      // make a new row to insert the cells\n      const rowWrapper = document.createElement(\"tr\");\n      const originalRow = sortedData[rowIndex][0].initialRow;\n      let rowData = Object.values(this.tableCellValues[originalRow]);\n      rowWrapper.append(...rowData);\n      wrapper.appendChild(rowWrapper);\n    }\n\n    // Update DOM state (classes, aria, etc)\n    if (this.sortOrder) {\n      const ariaSortedValue =\n        this.sortOrder === \"az\" ? \"descending\" : \"ascending\";\n      thisCell.setAttribute(\"aria-sort\", ariaSortedValue);\n\n      // Remove sorted-by on old headings\n      const sortedByHeadings = this.table.querySelectorAll(\n        \".rh-table__header--sorted-by\"\n      );\n      for (let index = 0; index < sortedByHeadings.length; index++) {\n        const sortedByHeading = sortedByHeadings[index];\n        sortedByHeading.classList.remove(\n          \"rh-table__header--sorted-by\",\n          \"rh-table__header--sorted-by--az\",\n          \"rh-table__header--sorted-by--za\"\n        );\n        sortedByHeading.removeAttribute(\"aria-sort\");\n      }\n\n      // Add it to our new cell\n      thisCell.classList.add(\"rh-table__header--sorted-by\");\n      const sortButton = thisCell.querySelector(\".rh-table__sort-button\");\n      let sortText;\n      switch (ariaSortedValue) {\n        case \"descending\":\n          sortText = this._getTranslatedString(\"sortAscending\");\n          if (sortButton && sortText)\n            sortButton.setAttribute(\"title\", sortText);\n          thisCell.classList.add(\"rh-table__header--sorted-by--za\");\n          break;\n        case \"ascending\":\n          sortText = sortText = this._getTranslatedString(\"sortDescending\");\n          if (sortButton && sortText)\n            sortButton.setAttribute(\"title\", sortText);\n          thisCell.classList.add(\"rh-table__header--sorted-by--az\");\n          break;\n      }\n    }\n\n    const tbody = this.querySelector(\"tbody\");\n    tbody.parentElement.replaceChild(wrapper, tbody);\n  }\n\n  /**\n   * Get the CSSSTyleSheet object by HTML Element's ID\n   * @param {string} stylesheetId HTML id of stylesheet element inDOM\n   * @returns {CSSStyleSheet} The CSSStyleSheet object associated with the HTML Element\n   */\n  _getCSSStyleSheetById(stylesheetId) {\n    const styleElement = this.querySelector(`#${stylesheetId}`);\n    if (styleElement && styleElement.sheet) {\n      return styleElement.sheet;\n    }\n  }\n\n  /**\n   * Removes all style rules from provided stylesheet\n   * @param {CSSSTyleSheet} stylesheet\n   */\n  _deleteAllRules(stylesheet) {\n    // Get rid of old styles\n    // Tried using a for loop, wasn't successful\n    while (stylesheet.cssRules.length > 0) {\n      stylesheet.deleteRule(0);\n    }\n  }\n\n  /**\n   * Function to highlight row, column, and currently hovered cell\n   * Uses the CSSOM to add styles instead of doing a bunch of DOM Updates\n   * @param {object} event Event object from event listener\n   */\n  _rowAndColumnHighlight(event) {\n    // Get the nearest table cell\n    let thisCell = event.target;\n    if (thisCell.tagName !== \"th\" || thisCell.tagName !== \"td\") {\n      thisCell = thisCell.closest(\"th, td\");\n    }\n    if (!thisCell) return;\n\n    // Get coordinates and add hover behavior\n    const row = thisCell.dataset.row;\n    const col = thisCell.dataset.col;\n    if (event.target && row && col) {\n      // If we're on the same cell as last time this was run we can avoid extra work\n      if ([row, col] === this.hovered.hoveredCoordinates) {\n        return;\n      }\n\n      this.hovered.hoveredCoordinates = [row, col];\n\n      if (this.hovered.checkInterval) {\n        clearInterval(this.hovered.checkInterval);\n      }\n\n      if (!this.hovered.styleElement) {\n        this.hovered.styleElement = document.createElement(\"style\");\n        this.hovered.styleElement.id = `hoverStyles--${this.dataset.id}`;\n        this.append(this.hovered.styleElement);\n        this.hovered.styleSheet = this._getCSSStyleSheetById(\n          this.hovered.styleElement.id\n        );\n      }\n\n      // Remove all previous styles\n      this._deleteAllRules(this.hovered.styleSheet);\n      // @todo Don't like hardcoding fallback colors in JS, not sure what a better option is though\n      const colHover = `#${this.id} [data-col=\"${col}\"] {\n          background: var(--rh-table--hoveredCol--Background, #EFF7FC);\n        }`;\n      const rowHover = `#${this.id} [data-row=\"${row}\"] {\n          background: var(--rh-table--hoveredRow--Background, #F3F3F3);\n        }`;\n      const intersectionHover = `#${this.id} [data-col=\"${col}\"][data-row=\"${row}\"] {\n          background: var(--rh-table--hoveredIntersection--Background, #E0EDF4)\n        }`;\n\n      // Add styles\n      this.hovered.styleSheet.insertRule(colHover, 0);\n      this.hovered.styleSheet.insertRule(rowHover, 1);\n      this.hovered.styleSheet.insertRule(intersectionHover, 2);\n\n      /**\n       * Remove row/col highlight if element is no longer hovered over\n       */\n      const hoverCheck = () => {\n        // Uses CSS pseudo state to see what element is currently hovered\n        const isHovered =\n          thisCell ===\n          thisCell.parentElement.querySelector(`[data-col=\"${col}\"]:hover`);\n        if (!isHovered) {\n          this._deleteAllRules(this.hovered.styleSheet);\n          this.hovered.hoveredCoordinates = null;\n          clearInterval(this.hovered.checkInterval);\n        }\n      };\n      this.hovered.checkInterval = setInterval(hoverCheck, 500);\n    }\n  }\n\n  /**\n   * Check to see if table scrolls, if so show/enable full screen functionality\n   */\n  _checkForScroll() {\n    const hasVerticalScroll = this._shadowWrapper.scrollHeight > this._shadowWrapper.clientHeight;\n    const hasHorizontalScroll = this._shadowWrapper.scrollWidth > this._shadowWrapper.clientWidth;\n    if (\n      this.table &&\n      this._shadowWrapper &&\n      hasVerticalScroll || hasHorizontalScroll\n    ) {\n      this.style.setProperty('--rh-table--scrollbar--width', `${this._shadowWrapper.offsetWidth - this._shadowWrapper.clientWidth}px`);\n      // Respects full screen option preference and minimize DOM changes\n      if (this.canFullScreen) {\n        if (this._fullScreenButton.hidden) this._fullScreenButton.hidden = false;\n        if (this._expandButton.hidden && hasVerticalScroll) this._expandButton.hidden = false;\n      }\n      // Check for attribute to minimize DOM changes\n      if (!this._shadowWrapper.hasAttribute('tabindex')) {\n        this._shadowWrapper.setAttribute('tabindex', '0');\n      }\n    } else {\n      // Don't hide expand and fullscreen if table can be un-expanded\n      if (this._expandUnpressed) {\n        // Check for attribute to minimize DOM changes\n        if (!this._fullScreenButton.hidden) this._fullScreenButton.hidden = true;\n        if (!this._expandButton.hidden) this._expandButton.hidden = true;\n      }\n      // Check for attribute to minimize DOM changes\n      if (this._shadowWrapper.hasAttribute('tabindex')) {\n        this._shadowWrapper.removeAttribute('tabindex');\n      }\n    }\n  }\n\n  /**\n   * Add HTML and behaviors necessary for sort\n   * @param {HTMLElement} columnHeader Sortable column header\n   */\n  _processSortableColumn(columnHeader) {\n    // Quick exit if it's been processed\n    if (columnHeader.classList.contains(\"sortable--processed\")) {\n      return;\n    }\n\n    const sortButton = this._sortButtonBoilerplate.cloneNode(\"true\");\n\n    // Remove hidden which is on the boilerplate\n    sortButton.hidden = false;\n\n    // Move any nodes (text node or Element) into the sort button\n    for (let index = 0; index < columnHeader.childNodes.length; index++) {\n      const childNode = columnHeader.childNodes[index];\n      sortButton.prepend(childNode);\n    }\n\n    // Add proper assistive text to the sort button\n    const sortText = this._getTranslatedString(\"sortDescending\");\n    if (sortButton && sortText) {\n      sortButton.setAttribute(\"title\", sortText);\n    }\n\n    // Add sort button to DOM and update column header\n    columnHeader.append(sortButton);\n    columnHeader.classList.add(\"sortable\");\n\n    sortButton.addEventListener(\"click\", this._sortData);\n\n    // Add our init class so we don't re-init\n    columnHeader.classList.add(\"sortable--processed\");\n  }\n\n  /**\n   * Get the table's data and update table's html\n   * Makes a copy of the table, enhance the copy, gets the data for sorting\n   */\n  _processLightDom() {\n    if (this.table && !this.classList.contains(\"rh-table--processed\")) {\n      //--------------------------------------------------\n      // Begin best time to manipulate the table's markup\n      // Modify elements when they're in not in the DOM yet\n      //--------------------------------------------------\n\n      const newTable = this.table.cloneNode(true);\n      this.tableSortValues = [];\n\n      // Set data attributes for column and row index\n      // Iterate over rows\n      const tableRows = newTable.querySelectorAll(\"tr\");\n      for (let rowIndex = 0; rowIndex < tableRows.length; rowIndex++) {\n        // @todo Handle row/col spanning\n        // Iterate over cells in each row\n        const tableRow = tableRows[rowIndex];\n        const tableCells = tableRow.querySelectorAll(\"td, th\");\n\n        let tableRowValues = [];\n        // if the table is sortable, this adds the rows to an object for sorting\n        if (this.sortable) {\n          this.tableCellValues[rowIndex] = Array.from(tableCells);\n        }\n        for (let colIndex = 0; colIndex < tableCells.length; colIndex++) {\n          const tableCell = tableCells[colIndex];\n\n          // Set col & row metadata\n          tableCell.dataset.row = rowIndex + 1;\n          tableCell.dataset.col = colIndex + 1;\n\n          if (tableCell.innerText.length > 75) {\n            tableCell.classList.add(\"content--lg\");\n          } else if (tableCell.innerText.length > 30) {\n            tableCell.classList.add(\"content--md\");\n          } else {\n            tableCell.classList.add(\"content--sm\");\n          }\n\n          // If the table isn't sortable, don't bother pulling any of the data for sorting\n          if (this.sortable) {\n            const sortableCols = this.sortable.split(\",\");\n\n            if (\n              rowIndex === 0 &&\n              sortableCols.includes((colIndex + 1).toString())\n            ) {\n              this._processSortableColumn(tableCell);\n            }\n\n            tableRowValues.push({\n              initialCol: colIndex,\n              initialRow: rowIndex,\n              innerText: tableCell.innerText.trim(),\n            });\n\n            // dump every cell into an object for lookup when sorting\n            this.tableCellValues[rowIndex][colIndex] = tableCell;\n          }\n        }\n        if (this.sortable) {\n          if (rowIndex !== 0) {\n            this.tableSortValues.push(tableRowValues);\n          }\n        }\n      }\n\n      //--------------------------------------------------\n      // End best time to manipulate the table's markup\n      //--------------------------------------------------\n      this.replaceChild(newTable, this.table);\n      this.table = newTable;\n\n      if (this.table) {\n        this._sortHeadings = this.table.querySelectorAll(\".sort-button\");\n      }\n\n      // Setup row/col hover effects\n      this.table.addEventListener(\"mouseover\", this._rowAndColumnHighlight);\n      this._checkForScroll();\n      this.classList.add(\"rh-table--processed\");\n    }\n  }\n\n  // _sortedHandler(event) {\n  //   this.emitEvent(RhTable.events.sorted, {\n  //     detail: {},\n  //   });\n  // }\n}\n\nPFElement.create(RhTable);\n\nexport default RhTable;\n"],"names":["RhTable","PFElement","type","PfeType","functionsToBind","table","_shadowWrapper","_this","shadowRoot","getElementById","canFullScreen","isFullscreen","_fullScreenButton","querySelector","_expandButton","_fullScreenCloseButton","_overlay","_expandUnpressed","hovered","docLang","_sortHeadings","tableSortValues","heading","values","tableCellValues","sortable","lastSortCol","resizeDebounce","sortOrder","_focusableElements","_previousFirstFocusableElement","_focusTrapCallbacks","translations","index","length","functionName","bind","error","_resizeListener","func","delay","timeout","immediate","context","this","args","arguments","callNow","setTimeout","apply","_checkForScroll","addEventListener","_toggleFullScreen","tag","PfeTypes","Content","newId","_sortButtonBoilerplate","querySelectorAll","topHeading","getAttribute","stringToBool","Math","random","toString","substring","maximizeTableString","dataset","id","_this2","classList","contains","remove","add","document","documentElement","lang","toLowerCase","_getTranslatedString","closeFullscreenString","setAttribute","warn","_processLightDom","removeEventListener","_rowAndColumnHighlight","_this3","string","stringName","queryFirstFocusableElement","lastFocusableElement","firstFocusableElement","first","event","_this4","key","preventDefault","focus","last","shiftKey","location","hash","setToFullscreen","style","height","offsetHeight","body","hidden","_handleEscPress","setupFocusTrap","_popstateListener","removeAttribute","removeFocusTrap","defaultPrevented","thisCell","target","closest","col","row","sortedData","wrapper","sort","a","b","aParam","innerText","bParam","aIsLetters","checkIfLetters","bIsLetters","toUpperCase","createElement","rowIndex","rowWrapper","originalRow","initialRow","rowData","Object","append","appendChild","ariaSortedValue","sortedByHeadings","sortedByHeading","sortButton","sortText","tbody","parentElement","replaceChild","value","RegExp","test","stylesheetId","styleElement","sheet","stylesheet","cssRules","deleteRule","rowHover","intersectionHover","tagName","hoveredCoordinates","checkInterval","styleSheet","_getCSSStyleSheetById","_deleteAllRules","colHover","insertRule","setInterval","_this5","hasVerticalScroll","scrollHeight","clientHeight","hasHorizontalScroll","scrollWidth","clientWidth","setProperty","offsetWidth","hasAttribute","columnHeader","cloneNode","childNodes","childNode","prepend","_sortData","newTable","tableRows","tableCells","tableRowValues","Array","from","colIndex","sortableCols","tableCell","split","includes","_processSortableColumn","push","trim","create"],"mappings":"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"}